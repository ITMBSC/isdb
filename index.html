<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Entrepreneurial Mindset Development Program - Application</title>
  <script src="https://static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      margin: 0;
      background: #f5f5f5;
      color: #333;
    }

    header {
      background: linear-gradient(90deg, #bd1e2d, #2d2d7c);
      color: white;
      padding: 1.5rem 1rem;
    }

    .header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
    }

    .logo {
      object-fit: contain;
    }

    .mbsc-logo {
      max-height: 100px;
      max-width: 160px;
    }

    .isdb-logo {
      max-height: 100px;
      max-width: 200px;
    }

    .header-content {
      flex: 1 1 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      margin-top: 1rem;
    }

    .header-content h1 {
      margin: 0;
      font-size: 1.6rem;
    }

    .header-content p {
      margin-top: 0.5rem;
      font-size: 1rem;
      max-width: 600px;
    }

    @media (max-width: 600px) {
      header {
        padding: 1rem 0 1.5rem;
      }

      .header-row {
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .mbsc-logo,
      .isdb-logo {
        height: 80px;
        max-width: 130px;
        margin: 0.5rem 0;
      }

      .header-content {
        margin-top: 0.5rem;
      }

      .header-content h1 {
        font-size: 1.4rem;
      }

      .header-content p {
        font-size: 0.95rem;
        margin: 0.5rem auto 0;
        max-width: 90%;
      }
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: #fff;
      padding: 30px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h2 {
      color: #2d2d7c;
    }

    form label {
      display: block;
      margin: 20px 0 5px;
    }

    form input,
    form textarea,
    form select {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    form input[type="checkbox"] {
      width: auto;
      margin-right: 10px;
    }

    .upload-wrapper {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      align-items: stretch;
      margin-bottom: 20px;
    }

    .upload-wrapper input[type="text"] {
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
      font-style: italic;
      cursor: pointer;
    }

    .upload-wrapper input[readonly].clickable {
      color: #2d2d7c;
      font-weight: 500;
      text-decoration: underline;
    }

    .upload-wrapper button {
      padding: 10px 20px;
      background: #2d2d7c;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      white-space: nowrap;
    }

    form button[type="submit"] {
      background: #2d2d7c;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      display: block;
      margin: 30px auto 0;
    }

    footer {
      text-align: center;
      padding: 20px;
      background: #eee;
      margin-top: 40px;
    }

    .styled-btn {
      background: #2d2d7c;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      margin-top: 10px;
    }

    .error-summary {
      border: 1px solid #bd1e2d;
      background-color: #ffe6e6;
      color: #bd1e2d;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }

    .error-summary h3 {
      margin-top: 0;
    }

    .error-summary ul {
      list-style: disc inside;
      margin: 0;
      padding-left: 1rem;
    }

    .field-error {
      border-color: #bd1e2d !important;
      background-color: #fff5f5;
    }
  </style>

</head>

<body>
  <header>
    <div class="header-row">
      <img src="NEW_MBSC_LOGO.png" alt="MBSC Logo" class="logo mbsc-logo" />

      <div class="header-content">
        <h1>Entrepreneurial Mindset Development Program</h1>
        <p>
          Empowering the next generation of entrepreneurs through a transformative
          experience rooted in innovation, purpose, and impact.
        </p>
      </div>

      <img src="isDB_logo.png" alt="IsDB Logo" class="logo isdb-logo" />
    </div>
  </header>


  <div class="container">
    <form id="applicationForm">
      <h2>Personal Information</h2>
      <label>Full Name *</label>
      <input type="text" id="fullName" />

      <label>Email *</label>
      <input type="text" id="email" placeholder="you@example.com" />

      <label>Phone Number *</label>
      <small>Format: CountryCodeXXXXXXXXX (e.g., 9665XXXXXXXX)</small>
      <input type="text" id="phone" placeholder="9665XXXXXXXX" />

      <label>Date of Birth *</label>
      <input type="date" id="dob" />

      <label>Gender *</label>
      <select id="gender">
        <option value="">Select</option>
        <option>Male</option>
        <option>Female</option>
      </select>

      <label>Nationality *</label>
      <select id="nationality"></select>

      <label>ID Number *</label>
      <input type="text" id="idNumber">

      <label>ID Expiry Date *</label>
      <input type="date" id="idExpiry">

      <label>Passport Number *</label>
      <input type="text" id="passportNumber" />

      <label>Passport Country *</label>
      <select id="passportCountry">
      </select>

      <label>Passport Expiry Date *</label>
      <input type="date" id="passportExpiry">

      <label>Upload ID or Passport (PDF or Image) *</label>
      <div class="upload-wrapper">
        <input type="text" id="idDocDisplay" placeholder="No file uploaded" readonly>
        <button type="button" onclick="uploadFile('idDocUrl', 'idDocDisplay', 'ID/Passport')">Upload</button>
      </div>
      <input type="hidden" id="idDocUrl" name="idDocUrl">

      <h2>Address Information</h2>
      <label>Building Code *</label><input type="text" id="buildingCode" placeholder="Building Code" />
      <label>Street *</label><input type="text" id="street" placeholder="Street" />
      <label>District *</label><input type="text" id="district" placeholder="District" />

      <div style="display: flex; gap: 10px">
        <div style="flex: 1">
          <label>Unit Code *</label><input type="text" id="unitCode" placeholder="Unit Code" />
        </div>
        <div style="flex: 1">
          <label>City *</label><input type="text" id="city" placeholder="City" />
        </div>
      </div>

      <div style="display: flex; gap: 10px">
        <div style="flex: 1">
          <label>State *</label><input type="text" id="state" placeholder="State" />
        </div>
        <div style="flex: 1">
          <label>Postal Code *</label><input type="text" id="postalCode" placeholder="Postal Code" />
        </div>
      </div>

      <label>Additional Number</label><input type="text" id="additionalNumber" placeholder="Additional Number" />

      <label>Country *</label>
      <select id="country">
        <option value="">-- Select Country --</option>
      </select>

      <!-- Academic Information Section -->
      <h2>Academic Information</h2>
      <!-- Static first entry (not removable) -->
      <div class="academic-entry static-entry">
        <label>Educational Institution *</label>
        <input type="text" class="academicInstitution">

        <label>Level of Education *</label>
        <select class="educationLevel">
          <option value="">Select</option>
          <option>High School</option>
          <option>Diploma</option>
          <option>Bachelor</option>
          <option>Masters</option>
          <option>PhD</option>
        </select>

        <label>Field/Major *</label>
        <input type="text" class="fieldMajor">

        <label>Location of Study *</label>
        <input type="text" class="studyLocation">

        <label>Start Date *</label>
        <input type="date" class="educationStartDate">

        <label>End Date *</label>
        <input type="date" class="educationEndDate">

        <label>GPA Scale *</label>
        <select class="gpaScale">
          <option value="">Select</option>
          <option>4.0 Scale</option>
          <option>5.0 Scale</option>
          <option>100 (Percentage)</option>
          <option>10-Point Scale</option>
          <option>Letter Grade (A to F)</option>
          <option>UK Scale</option>
          <option>UK Masters Scale</option>
          <option>Others</option>
        </select>

        <label>GPA Score *</label>
        <input type="number" step="0.01" class="gpaScore">

        <hr />
      </div>

      <!-- Where additional entries go -->
      <div id="academicListContainer"></div>

      <template id="academicTemplate">
        <div class="academic-entry">
          <label>Educational Institution *</label>
          <input type="text" class="academicInstitution">

          <label>Level of Education *</label>
          <select class="educationLevel">
            <option value="">Select</option>
            <option>High School</option>
            <option>Diploma</option>
            <option>Bachelor</option>
            <option>Masters</option>
            <option>PhD</option>
          </select>

          <label>Field/Major *</label>
          <input type="text" class="fieldMajor">

          <label>Location of Study *</label>
          <input type="text" class="studyLocation">

          <label>Start Date *</label>
          <input type="date" class="educationStartDate">

          <label>End Date *</label>
          <input type="date" class="educationEndDate">

          <label>GPA Scale *</label>
          <select class="gpaScale">
            <option value="">Select</option>
            <option>4.0 Scale</option>
            <option>5.0 Scale</option>
            <option>100 (Percentage)</option>
            <option>10-Point Scale</option>
            <option>Letter Grade (A to F)</option>
            <option>UK Scale</option>
            <option>UK Masters Scale</option>
            <option>Others</option>
          </select>

          <label>GPA Score *</label>
          <input type="number" step="0.01" class="gpaScore">

          <button type="button" class="removeAcademicBtn styled-btn">Remove Entry</button>
          <hr />
        </div>
      </template>

      <button type="button" id="addAcademicBtn" class="styled-btn">Add Academic Entry</button>

      <label for="englishProficiency">English Proficiency Level *</label>
      <select id="englishProficiency">
        <option value="">Select</option>
        <option>Beginner</option>
        <option>Early Intermediate</option>
        <option>Intermediate</option>
        <option>Advanced</option>
        <option>Proficient</option>
      </select>

      <!-- Experience Information Section -->
      <h2>Work Experience</h2>

      <!-- Initial static entry -->
      <div class="experience-entry">
        <label>Company Name *</label><input type="text" class="companyName" />
        <label>Job Title *</label><input type="text" class="jobTitle" />
        <label>Location of Work *</label><input type="text" class="workLocation" />
        <label>Start Date *</label><input type="date" class="workStartDate" />
        <label>End Date</label><input type="date" class="workEndDate" />
        <label><input type="checkbox" class="currentlyWorking" /> Currently Working Here</label>
        <hr />
      </div>

      <!-- Where additional entries go -->
      <div id="experienceListContainer"></div>

      <template id="experienceTemplate">
        <div class="experience-entry">
          <label>Company Name *</label>
          <input type="text" class="companyName">

          <label>Job Title *</label>
          <input type="text" class="jobTitle">

          <label>Location of Work *</label>
          <input type="text" class="workLocation">

          <label>Start Date *</label>
          <input type="date" class="workStartDate">

          <label>End Date</label>
          <input type="date" class="workEndDate">

          <label>
            <input type="checkbox" class="currentlyWorking"> Currently Working Here
          </label>

          <button type="button" class="removeExperienceBtn styled-btn">Remove Entry</button>
          <hr />
        </div>
      </template>

      <button type="button" id="addExperienceBtn" class="styled-btn">Add Experience Entry</button>

      <label>Years of Experience *</label>
      <select id="experienceYears">
        <option value="">Select</option>
        <option>1â€“3 years</option>
        <option>3â€“5 years</option>
        <option>5â€“10 years</option>
        <option>More than 10 years</option>
      </select>
      <label>LinkedIn Profile *</label><input type="url" id="linkedinProfile" />
      <label>Resume (PDF only) *</label>
      <div class="upload-wrapper">
        <input type="text" id="resumeDisplay" placeholder="No file uploaded" readonly>
        <button type="button" onclick="uploadFile('resumeUrl', 'resumeDisplay', 'Resume')">Upload</button>
      </div>
      <input type="hidden" id="resumeUrl" name="resumeUrl">

      <h2>Entrepreneurial Journey & Business Insight</h2>
      <p><strong>Instructions:</strong> This is your chance to showcase your journey and business insight through a
        short 2â€“3 minute video. Your video will be reviewed by MBSC and IsDB, so make sure it is clear, professional,
        and well-lit. Speak clearly, and avoid distractions. Follow the guide below:</p>

      <ul>
        <li><strong>Start with an Introduction:</strong> State your full name and current role in your venture.</li>
        <li><strong>Talk About Your Venture:</strong> Describe your business, achievements, traction, and growth
          metrics.</li>
        <li><strong>Mention Your Passion and Focus:</strong> What drives you as an entrepreneur?</li>
        <li><strong>Share Your Impact:</strong> What difference is your business making in society or the market?</li>
        <li><strong>Wrap Up:</strong> Share why youâ€™re applying and why this program is meaningful to you.</li>
      </ul>

      <p><strong>ðŸ“¹ How to record:</strong> You can use <a href="https://www.loom.com/" target="_blank">Loom</a> to
        easily record your video.</p>
      <ol>
        <li>Go to <a href="https://www.loom.com/" target="_blank">loom.com</a> and sign up or log in.</li>
        <li>Click "New Video" and choose "Screen + Camera" or "Camera Only".</li>
        <li>Record your video using the tips above. Keep it under 3 minutes.</li>
        <li>Copy the link after uploading and paste it below.</li>
      </ol>

      <label for="videoBiographyLink">Video Biography Link (Loom URL) *</label>
      <input type="url" id="videoBiographyLink" placeholder="https://www.loom.com/share/...">

      <label>Tell us about your business *</label>
      <textarea id="businessDescription" rows="4"></textarea>

      <label>Describe your role in the business, including your main responsibilities *</label>
      <textarea id="businessRole" rows="4"></textarea>

      <label>What is your businessâ€™s current team size? *</label>
      <input type="number" id="teamSize" min="0">

      <label>What is the social impact of your business, if any? *</label>
      <textarea id="socialImpact" rows="3"></textarea>

      <label>Official Website or Online Presence *</label>
      <input type="url" id="businessWebsite">

      <label>Please tell us about any impact, meaningful difference, or initiatives you have led *</label>
      <textarea id="businessImpact" rows="4"></textarea>

      <label>Have you received any awards at the local, national, or international level? *</label>
      <textarea id="businessAwards" rows="4"></textarea>

      <label>Upload your Business Registration Certificate (PDF) *</label>
      <div class="upload-wrapper">
        <input type="text" id="businessCertDisplay" placeholder="No file uploaded" readonly>
        <button type="button"
          onclick="uploadFile('businessCertUrl', 'businessCertDisplay', 'Business Certificate')">Upload</button>
      </div>
      <input type="hidden" id="businessCertUrl" name="businessCertUrl">

      <label>Is your business aligned with the UN Sustainable Development Goals (SDGs)? *</label>
      <textarea id="businessSdgs" rows="4"></textarea>

      <label>What would you like to gain from this program? *</label>
      <textarea id="programExpectations" rows="4"></textarea>



      <h2>Miscellaneous</h2>

      <label>Are you available during the program dates mentioned? *</label>
      <select id="availableDuringProgram">
        <option value="">Select</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>

      <label>Have you ever been enrolled in an entrepreneurship program, either
        currently or in the past? *</label>
      <select id="enrolledInEntrepreneurship">
        <option value="">Select</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>

      <label>How did you hear about this program? *</label>
      <select id="howDidYouHear">
        <option value="">Select</option>
        <option>MBSC Website</option>
        <option>IsDBI Summit</option>
        <option>Search Engine</option>
        <option>Social Media</option>
        <option>Word of Mouth</option>
        <option>Referral (Family, Friends, or Colleagues)</option>
        <option>Other</option>
      </select>

      <label>Do you have any types of disability? *</label>
      <select id="hasDisability">
        <option value="">Select</option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
      </select>

      <label><input type="checkbox" id="declaration" /> I declare that
        all the information provided is true and correct and I understand that
        any false information would disqualify my application from the
        program.</label>

      <div id="errorSummary" class="error-summary" style="display: none;">
        <h3>Please fix the following errors:</h3>
        <ul id="errorList"></ul>
      </div>

      <button type="submit">Submit Application</button>
    </form>

    <div id="thankYouMessage" style="display: none; text-align: center; padding: 40px;">
      <h2>ðŸŽ‰ Thank you for your application!</h2>
      <p>Weâ€™ve received your submission and will review it shortly.</p>
    </div>

  </div>

  <footer>
    &copy; 2025 Prince Mohammed Bin Salman College. All rights reserved.
  </footer>

  <script>
    const filestackClient = filestack.init("ALTBAwlAkT2WmD9xeo3c5z");

    function uploadFile(hiddenFieldId, displayFieldId, fileLabel) {
      const client = filestack.init('ALTBAwlAkT2WmD9xeo3c5z'); // Replace with your API key
      client.picker({
        maxFiles: 1,
        accept: ['.pdf'],
        onUploadDone: function (result) {
          const file = result.filesUploaded[0];
          const fileName = file.filename;
          const fileUrl = file.url;

          document.getElementById(hiddenFieldId).value = fileUrl;
          document.getElementById(displayFieldId).value = fileLabel + " Uploaded";
          document.getElementById(displayFieldId).classList.add("clickable");
          document.getElementById(displayFieldId).onclick = () => window.open(fileUrl, "_blank");
        }
      }).open();
    }

    const endpoint =
      "https://prod-94.westeurope.logic.azure.com:443/workflows/d49d7e8b4f65499ab91f5666a92dfeb4/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=q1hpWBhaibt1SIv4sOZ5g3T7gWjNs5PRRbSzhhGEcaU";

    function validateForm() {
      const errors = [];

      // Full Name validation
      const fullNameField = document.getElementById("fullName");
      const fullName = fullNameField.value.trim();
      fullNameField.classList.remove("field-error");

      if (!fullName) {
        errors.push("Full Name is required.");
        fullNameField.classList.add("field-error");
      }

      // Email validation
      const emailField = document.getElementById("email");
      const email = emailField.value.trim();
      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      emailField.classList.remove("field-error");

      if (!email) {
        errors.push("Email is required.");
        emailField.classList.add("field-error");
      } else if (!emailPattern.test(email)) {
        errors.push("Please enter a valid email address.");
        emailField.classList.add("field-error");
      }

      // Phone number validation
      const phoneField = document.getElementById("phone");
      const phone = phoneField.value.trim();
      const phonePattern = /^\d+$/; // Digits only
      phoneField.classList.remove("field-error");

      if (!phone) {
        errors.push("Phone number is required.");
        phoneField.classList.add("field-error");
      } else if (!phonePattern.test(phone)) {
        errors.push("Phone number must contain digits only.");
        phoneField.classList.add("field-error");
      } else if (phone.startsWith("0")) {
        errors.push("Phone number must not start with 0.");
        phoneField.classList.add("field-error");
      } else if (phone.length < 8 || phone.length > 15) {
        errors.push("Phone number must be between 8 and 15 digits long.");
        phoneField.classList.add("field-error");
      }

      // Date of Birth validation
      const dobField = document.getElementById("dob");
      const dob = dobField.value.trim();
      dobField.classList.remove("field-error");

      if (!dob) {
        errors.push("Date of birth is required.");
        dobField.classList.add("field-error");
      } else {
        const dobDate = new Date(dob);
        const today = new Date();
        today.setHours(0, 0, 0, 0); // Reset time for accurate comparison

        if (dobDate >= today) {
          errors.push("Date of birth must be in the past.");
          dobField.classList.add("field-error");
        }
      }

      // Gender validation
      const genderField = document.getElementById("gender");
      const gender = genderField.value;
      genderField.classList.remove("field-error");

      if (!gender) {
        errors.push("Gender is required.");
        genderField.classList.add("field-error");
      }

      // Nationality validation
      const nationalityField = document.getElementById("nationality");
      const nationality = nationalityField.value;
      nationalityField.classList.remove("field-error");

      if (!nationality) {
        errors.push("Nationality is required.");
        nationalityField.classList.add("field-error");
      }

      // ID Number validation
      const idNumberField = document.getElementById("idNumber");
      const idNumber = idNumberField.value.trim();
      idNumberField.classList.remove("field-error");

      if (!idNumber) {
        errors.push("ID Number is required.");
        idNumberField.classList.add("field-error");
      } else if (!/^\d+$/.test(idNumber)) {
        errors.push("ID Number must contain digits only.");
        idNumberField.classList.add("field-error");
      } else if (idNumber.length < 7 || idNumber.length > 13) {
        errors.push("ID Number must be between 7 and 13 digits.");
        idNumberField.classList.add("field-error");
      }

      // ID Expiry Date validation
      const idExpiryField = document.getElementById("idExpiry");
      const idExpiry = idExpiryField.value;
      idExpiryField.classList.remove("field-error");

      if (!idExpiry) {
        errors.push("ID Expiry Date is required.");
        idExpiryField.classList.add("field-error");
      } else {
        const expiryDate = new Date(idExpiry);
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        if (expiryDate <= today) {
          errors.push("ID Expiry Date must be in the future.");
          idExpiryField.classList.add("field-error");
        }
      }

      // Passport Number validation
      const passportNumberField = document.getElementById("passportNumber");
      const passportNumber = passportNumberField.value.trim();
      passportNumberField.classList.remove("field-error");

      if (!passportNumber) {
        errors.push("Passport Number is required.");
        passportNumberField.classList.add("field-error");
      } else if (!/^[A-Za-z0-9]{5,15}$/.test(passportNumber)) {
        errors.push("Passport Number must be 5â€“15 characters, letters and/or digits.");
        passportNumberField.classList.add("field-error");
      }

      // Passport Country validation
      const passportCountryField = document.getElementById("passportCountry");
      const passportCountry = passportCountryField.value;
      passportCountryField.classList.remove("field-error");

      if (!passportCountry) {
        errors.push("Please select your passport country.");
        passportCountryField.classList.add("field-error");
      }

      // Passport Expiry Date validation
      const passportExpiryField = document.getElementById("passportExpiry");
      const passportExpiry = passportExpiryField.value;
      passportExpiryField.classList.remove("field-error");

      if (!passportExpiry) {
        errors.push("Passport expiry date is required.");
        passportExpiryField.classList.add("field-error");
      } else {
        const expiryDate = new Date(passportExpiry);
        const today = new Date();
        today.setHours(0, 0, 0, 0); // Normalize for comparison

        if (expiryDate <= today) {
          errors.push("Passport expiry date must be in the future.");
          passportExpiryField.classList.add("field-error");
        }
      }

      // ID Document Upload validation
      const idDocDisplayField = document.getElementById("idDocDisplay");
      idDocDisplayField.classList.remove("field-error");

      if (!document.getElementById("idDocUrl").value) {
        errors.push("Please upload your ID document.");
        idDocDisplayField.classList.add("field-error");
      }



      // Display errors in summary block
      const errorSummary = document.getElementById("errorSummary");
      const errorList = document.getElementById("errorList");
      errorList.innerHTML = "";

      if (errors.length > 0) {
        errors.forEach(err => {
          const li = document.createElement("li");
          li.textContent = err;
          errorList.appendChild(li);
        });
        errorSummary.style.display = "block";
        return false; // Prevent submission
      } else {
        errorSummary.style.display = "none";
        return true; // Allow submission
      }
    }



    document.getElementById("applicationForm").addEventListener("submit", async function (e) {
      e.preventDefault();

      if (validateForm()) {
        // 1. Collect and structure all form data
        const data = collectFormData();

        // 2. Submit data to Power Automate
        try {
          const response = await fetch(endpoint, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(data)
          });

          if (response.ok || response.status === 0) {
            document.getElementById("applicationForm").style.display = "none";
            document.getElementById("thankYouMessage").style.display = "block";
          } else {
            console.error("Server responded with status:", response.status);
            alert("Something went wrong. Please try again.");
          }
        } catch (error) {
          console.error("Submission error:", error);
          alert("Submission failed. Please check your connection and try again.");
        }
      }
    });

    function collectFormData() {
      return {
        // Personal Info
        fullName: document.getElementById("fullName").value.trim(),
        email: document.getElementById("email").value.trim(),
        phone: document.getElementById("phone").value.trim(),
        dob: document.getElementById("dob").value,
        gender: document.getElementById("gender").value,
        nationality: document.getElementById("nationality").value,
        idNumber: document.getElementById("idNumber").value.trim(),
        idExpiry: document.getElementById("idExpiry").value,
        passportNumber: document.getElementById("passportNumber").value.trim(),
        passportCountry: document.getElementById("passportCountry").value,
        passportExpiry: document.getElementById("passportExpiry").value,

        // Address Info (including city)
        buildingCode: document.getElementById("buildingCode").value.trim(),
        street: document.getElementById("street").value.trim(),
        district: document.getElementById("district").value.trim(),
        unitCode: document.getElementById("unitCode").value.trim(),
        city: document.getElementById("city").value.trim(),
        state: document.getElementById("state").value.trim(),
        postalCode: document.getElementById("postalCode").value.trim(),
        additionalNumber: document.getElementById("additionalNumber").value.trim(),
        country: document.getElementById("country").value,

        // Uploads
        resumeUrl: document.getElementById("resumeUrl").value,
        idDocUrl: document.getElementById("idDocUrl").value,
        businessCertUrl: document.getElementById("businessCertUrl").value,

        // Academic Info
        academicList: collectAcademicEntries(),
        englishProficiency: document.getElementById("englishProficiency").value,

        // Experience Info
        experienceList: collectExperienceEntries(),
        experienceYears: document.getElementById("experienceYears").value,
        linkedinProfile: document.getElementById("linkedinProfile").value.trim(),

        // Video
        videoUrl: document.getElementById("videoBiographyLink").value.trim(),

        // Business Insight
        businessDescription: document.getElementById("businessDescription").value.trim(),
        yourRole: document.getElementById("businessRole").value.trim(),
        teamSize: document.getElementById("teamSize").value,
        socialImpact: document.getElementById("socialImpact").value.trim(),
        onlinePresence: document.getElementById("businessWebsite").value.trim(),
        sdgAlignment: document.getElementById("businessSdgs").value.trim(),
        programGoals: document.getElementById("programExpectations").value.trim(),
        businessImpact: document.getElementById("businessImpact").value.trim(),
        businessAwards: document.getElementById("businessAwards").value.trim(),

        // Miscellaneous
        availableDuringProgram: document.getElementById("availableDuringProgram").value,
        participatedBefore: document.getElementById("enrolledInEntrepreneurship").value,
        heardAboutProgram: document.getElementById("howDidYouHear").value,
        hasDisability: document.getElementById("hasDisability").value,

        // Declaration
        agreeDeclaration: document.getElementById("declaration").checked
      };
    }



    const countryList = [
      "Saudi Arabia",
      "Afghanistan",
      "Ã…land Islands",
      "Albania",
      "Algeria",
      "American Samoa",
      "Andorra",
      "Angola",
      "Anguilla",
      "Antarctica",
      "Antigua and Barbuda",
      "Argentina",
      "Armenia",
      "Aruba",
      "Australia",
      "Austria",
      "Azerbaijan",
      "Bahamas",
      "Bahrain",
      "Bangladesh",
      "Barbados",
      "Belarus",
      "Belgium",
      "Belize",
      "Benin",
      "Bermuda",
      "Bhutan",
      "Bolivia (Plurinational State of)",
      "Bonaire, Sint Eustatius and Saba",
      "Bosnia and Herzegovina",
      "Botswana",
      "Bouvet Island",
      "Brazil",
      "British Indian Ocean Territory",
      "Brunei Darussalam",
      "Bulgaria",
      "Burkina Faso",
      "Burundi",
      "Cabo Verde",
      "Cambodia",
      "Cameroon",
      "Canada",
      "Cayman Islands",
      "Central African Republic",
      "Chad",
      "Chile",
      "China",
      "Christmas Island",
      "Cocos (Keeling) Islands",
      "Colombia",
      "Comoros",
      "Congo (Democratic Republic of the)",
      "Congo (Republic of the)",
      "Cook Islands",
      "Costa Rica",
      "CÃ´te d'Ivoire",
      "Croatia",
      "Cuba",
      "CuraÃ§ao",
      "Cyprus",
      "Czech Republic",
      "Denmark",
      "Djibouti",
      "Dominica",
      "Dominican Republic",
      "Ecuador",
      "Egypt",
      "El Salvador",
      "Equatorial Guinea",
      "Eritrea",
      "Estonia",
      "Ethiopia",
      "Falkland Islands (Malvinas)",
      "Faroe Islands",
      "Fiji",
      "Finland",
      "France",
      "French Guiana",
      "French Polynesia",
      "French Southern Territories",
      "Gabon",
      "Gambia",
      "Georgia",
      "Germany",
      "Ghana",
      "Gibraltar",
      "Greece",
      "Greenland",
      "Grenada",
      "Guadeloupe",
      "Guam",
      "Guatemala",
      "Guernsey",
      "Guinea",
      "Guinea-Bissau",
      "Guyana",
      "Haiti",
      "Heard Island and McDonald Islands",
      "Honduras",
      "Hong Kong",
      "Hungary",
      "Iceland",
      "India",
      "Indonesia",
      "Iran",
      "Iraq",
      "Ireland",
      "Isle of Man",
      "Zimbabwe"
    ];


    const nationalityList = [
      "Saudi",
      "Afghan",
      "Ã…land Island",
      "Albanian",
      "Algerian",
      "American Samoan",
      "Andorran",
      "Angolan",
      "Anguillan",
      "Antarctic",
      "Antiguan or Barbudan",
      "Argentine",
      "Armenian",
      "Aruban",
      "Australian",
      "Austrian",
      "Azerbaijani",
      "Bahamian",
      "Bahraini",
      "Bangladeshi",
      "Barbadian",
      "Belarusian",
      "Belgian",
      "Belizean",
      "Beninese",
      "Bermudian",
      "Bhutanese",
      "Bolivian",
      "Bonaire",
      "Bosnian or Herzegovinian",
      "Motswana",
      "Bouvet Island",
      "Brazilian",
      "BIOT",
      "Bruneian",
      "Bulgarian",
      "BurkinabÃ©",
      "Burundian",
      "Cabo Verdean",
      "Cambodian",
      "Cameroonian",
      "Canadian",
      "Caymanian",
      "Central African",
      "Chadian",
      "Chilean",
      "Chinese",
      "Christmas Island",
      "Cocos Island",
      "Colombian",
      "Comoran",
      "Congolese",
      "Congolese",
      "Cook Island",
      "Costa Rican",
      "Ivorian",
      "Croatian",
      "Cuban",
      "CuraÃ§aoan",
      "Cypriot",
      "Czech",
      "Danish",
      "Djiboutian",
      "Dominican",
      "Dominican",
      "Ecuadorian",
      "Egyptian",
      "Salvadoran",
      "Equatorial Guinean",
      "Eritrean",
      "Estonian",
      "Ethiopian",
      "Falkland Islander",
      "Faroese",
      "Fijian",
      "Finnish",
      "French",
      "French Guianan",
      "French Polynesian",
      "French Southern Territories",
      "Gabonese",
      "Gambian",
      "Georgian",
      "German",
      "Ghanaian",
      "Gibraltar",
      "Greek",
      "Greenlandic",
      "Grenadian",
      "Guadeloupean",
      "Guamanian",
      "Guatemalan",
      "Guernsey",
      "Guinean",
      "Bissau-Guinean",
      "Guyanese",
      "Haitian",
      "Heard Island",
      "Honduran",
      "Hong Kong",
      "Hungarian",
      "Icelander",
      "Indian",
      "Indonesian",
      "Iranian",
      "Iraqi",
      "Irish",
      "Isle of Man",
      "Zimbabwean"
    ];


    function populateDropdown(dropdownId, options) {
      const select = document.getElementById(dropdownId);
      select.innerHTML = '<option value="">Select</option>';
      options.forEach(value => {
        const option = document.createElement("option");
        option.value = value;
        option.textContent = value;
        select.appendChild(option);
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      populateDropdown("country", countryList);          // For contact info
      populateDropdown("passportCountry", countryList);  // For passport
      populateDropdown("nationality", nationalityList);  // New dropdown for nationality
    });

    const academicList = [];

    const addBtn = document.getElementById("addAcademicBtn");
    const container = document.getElementById("academicListContainer");
    const template = document.getElementById("academicTemplate");

    // Add new academic entry
    addBtn.addEventListener("click", () => {
      const clone = template.content.cloneNode(true);

      clone.querySelector(".removeAcademicBtn").addEventListener("click", (e) => {
        e.target.closest(".academic-entry").remove();
      });

      container.appendChild(clone);
    });

    // Collect all entries for submission
    function collectAcademicEntries() {
      const entries = document.querySelectorAll(".academic-entry");
      const list = [];

      entries.forEach(entry => {
        list.push({
          institution: entry.querySelector(".academicInstitution").value.trim(),
          level: entry.querySelector(".educationLevel").value,
          major: entry.querySelector(".fieldMajor").value.trim(),
          location: entry.querySelector(".studyLocation").value.trim(),
          startDate: entry.querySelector(".educationStartDate").value,
          endDate: entry.querySelector(".educationEndDate").value,
          gpaScale: entry.querySelector(".gpaScale").value,
          gpaScore: entry.querySelector(".gpaScore").value
        });
      });

      return list;
    }

    const experienceList = [];

    const addExperienceBtn = document.getElementById("addExperienceBtn");
    const experienceContainer = document.getElementById("experienceListContainer");
    const experienceTemplate = document.getElementById("experienceTemplate");

    addExperienceBtn.addEventListener("click", () => {
      const clone = experienceTemplate.content.cloneNode(true);

      clone.querySelector(".removeExperienceBtn").addEventListener("click", (e) => {
        e.target.closest(".experience-entry").remove();
      });

      experienceContainer.appendChild(clone);
    });

    // Function to collect data
    function collectExperienceEntries() {
      const entries = document.querySelectorAll(".experience-entry");
      const list = [];

      entries.forEach(entry => {
        list.push({
          company: entry.querySelector(".companyName").value.trim(),
          title: entry.querySelector(".jobTitle").value.trim(),
          location: entry.querySelector(".workLocation").value.trim(),
          startDate: entry.querySelector(".workStartDate").value,
          endDate: entry.querySelector(".workEndDate").value,
          currentlyWorking: entry.querySelector(".currentlyWorking").checked
        });
      });

      return list;
    }


  </script>
</body>

</html>